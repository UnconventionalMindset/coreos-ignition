{
  "ignition": {
    "version": "3.3.0"
  },
  "storage": {
    "files": [
      {
        "overwrite": true,
        "path": "/etc/groups",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/yyO3QrDIAxG732Xge6P+r2NNIF2qw3Eurm3HzbeCOd4SKIiBxo8XKKMhjtmUXbfhXlDQ/DGpZJ0fA78lYMzXV5SdU9nGEdJMr9Z0RCnq5lFMtdyuuD9yPpjIsDRmjap/Y4w2fdnJe4Lb9FYeacx4WHmHwAA//9KMGWAuQAAAA=="
        },
        "mode": 420
      },
      {
        "path": "/usr/local/bin/boot-permissions-selinux-policy.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3SOMUvGMBBA9/yKk/6A5HNycSmKi0OhdC5pctKD9E5yl9b+exGFLn7rg/d43YNfiP0SdXUdDFg3UiVhhQ+pMI09ZNwpoUurHAy3EAL4jLs3O6exD66D8fWduH3BpxRKJ5hALEUOSMIWibHqD2uKEPn8y8EupW0ImzQ2zEBscglO0RQXkXKxuSnOv7I+W234z+7bMN3bzZV8Rc5YX26PT+47AAD//1L2x2L3AAAA"
        },
        "mode": 493
      },
      {
        "path": "/usr/local/bin/acl-permissions-sticky-bit.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/5TQz2vCMBQH8Hv+ije7mwupGwMNTJBdd9pZGDV5tcE2r+RHrf/9SKuoc2x46OH96IfvS/YgNsaKTeErVrSt/yqp1ujeRFc4UVGDQpFDkUYsg9X7B/NRE3gMZaFq4Nyhis6bDoHzhrQpD7BmGssi1kFGj07O8jyXbt8/nbpbR7G9bVOo0EnJOYc1e7wIw1gGxyVIIpSUvmGkKtpb4J+QOLj6S1UN6TSKU389OXNDlGtv69p/vO2t54NRuwNsTAAOrcMObQCNNQZDFkpHDViynPb2EpoG+HnnSmsP6cnHSwMdI2pT1BQDy1BVBJNjKXs5m8u0PoHlEgQGJYb9P6TOaKSTMxSyly+LOxWHdrh8ZMYqpclf74Q0qd0ZGivZy8X8+VfoOwAA///sm+1VsAIAAA=="
        },
        "mode": 493
      },
      {
        "path": "/usr/local/bin/save-rr-apps.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3zLQarCQBCE4f2coh8vCxWkTiB4Brci0pmZmKDpHmqCouLdJeLaVdXi//7/0A6GVmsfyKOWUjcLalJSqts8hX67zKfVh5LL0Dkl28S7DCbN88v228MrJA8isch61wmuSvQ+ZkRnxtwgeTxnovlwRLduOGElGG1C7ZU5/ehCcsvhHQAA//8q70JCsgAAAA=="
        },
        "mode": 493
      },
      {
        "path": "/usr/local/bin/restore-rr-apps.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3zLQarCQBCE4f2coh8vCxWkTiB4Brci0pmZmKDpHmqCouLdJeLaVdXi//7/0A6GVmsfyKOWUjcLalJSqts8hX67zKfVh5LL0Dkl28S7DCbN88v228MrJA8isch61wlGm1B7ZU6YAySP50w0H4vo1g0nrARXJXofM6Iz/0hDcsvhHQAA///XvU8ZsgAAAA=="
        },
        "mode": 493
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "[Service]\n# Makes sure we copy before NFS is disconnected\n# Dependencies order is reverted for shutdown\nRequiresMountsFor=/mnt/shared\nType=oneshot\n# Execute at shutdown\nExecStop=/usr/local/bin/save-rr-apps.sh\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "save-rr-apps.service"
      },
      {
        "contents": "[Service]\nRequiresMountsFor=/mnt/shared\nType=oneshot\nExecStart=/usr/local/bin/restore-rr-apps.sh\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "restore-rr-apps.service"
      },
      {
        "contents": "[Service]\nType=oneshot\nExecStart=/usr/local/bin/boot-permissions-selinux-policy.sh\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "boot-permissions-selinux-policy.service"
      },
      {
        "contents": "[Unit]\nConditionPathExists=!/var/lib/acl-permissions-sticky-bit\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/acl-permissions-sticky-bit.sh\nExecStartPost=/usr/bin/touch /var/lib/acl-permissions-sticky-bit\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "folder-permissions.service"
      }
    ]
  }
}
